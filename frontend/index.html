<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Job Manager (Frontend)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <h1>Job Manager (Frontend)</h1>
  <button id="toggleDarkMode">Toggle Dark Mode</button>
  <div class="row">
    <div class="col panel">
      <h2>Job Info</h2>
      <input id="jobId" type="hidden" />
      <label>Job Number</label>
      <input id="jobNumber" type="text" />
      <label>Job Name</label>
      <input id="jobName" type="text" />
      <label>PM</label>
      <input id="pm" type="text" />
      <label>Work Order #</label>
      <input id="workOrder" type="text" />
      <label class="checkbox"><input id="archived" type="checkbox" /> Archived</label>
      <div class="action-buttons">
        <button id="saveJob">Save Job</button>
        <button id="loadJobs">Refresh Job List</button>
      </div>

      <div class="section">
        <h3>Frames</h3>
        <div class="action-buttons">
          <button id="addFrame">Add Frame (manual)</button>
          <input id="framesCsv" type="file" accept=".csv" class="file-input" />
          <button id="importFramesBtn">Import Frames CSV</button>
        </div>
        <div id="framesList" class="list"></div>
      </div>

      <div class="section">
        <h3>Doors</h3>
        <div class="action-buttons">
          <button id="addDoor">Add Door (manual)</button>
          <input id="doorsCsv" type="file" accept=".csv" class="file-input" />
          <button id="importDoorsBtn">Import Doors CSV</button>
        </div>
        <div id="doorsList" class="list"></div>
      </div>
    </div>

    <div class="col panel">
      <h2>Jobs</h2>
      <label>Filter</label>
      <input id="filterJobs" type="text" placeholder="type job number or name..." />
      <label class="checkbox"><input id="viewArchived" type="checkbox" /> View Archived</label>
      <select id="jobsSelect" size="10" class="job-select"></select>
      <div class="action-buttons">
        <button id="loadSelected">Load Selected</button>
        <button id="deleteSelected">Delete Selected</button>
        <button id="exportPdfSelected">Export PDF (selected)</button>
      </div>
      <div class="section">
        <button id="exportJsonDownload">Download All Data (JSON)</button>
      </div>
      <div class="muted note">
        Note: CSV import is done server-side and stored in Postgres. PDF generation happens in your browser using jsPDF.
      </div>
    </div>
  </div>

<!-- small modal for custom KV entry -->
<div id="modal" class="modal-overlay">
  <div class="modal-body">
    <h3 id="modalTitle">Add Item</h3>
    <div id="kvContainer"></div>
    <button id="addKVbtn">Add field</button>
    <div class="modal-actions">
      <button id="modalSave">Save</button>
      <button id="modalCancel">Cancel</button>
    </div>
  </div>
</div>
  <script src="js/app.js"></script>
  <script src="js/pdf.js"></script>
</body>
</html>
