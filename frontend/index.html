<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="theme-color" content="#d6232a" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <title>Job Manager (Frontend)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <h1>Job Manager (Frontend)</h1>
  <button id="toggleDarkMode">Toggle Dark Mode</button>
  <div class="row">
    <div class="col panel">
      <h2>Job Info</h2>
      <input id="jobId" type="hidden" />
      <label>Job Number</label>
      <input id="jobNumber" type="text" />
      <label>Job Name</label>
      <input id="jobName" type="text" />
      <label>PM</label>
      <select id="pm"></select>
      <label class="checkbox"><input id="archived" type="checkbox" /> Archived</label>
      <div class="action-buttons">
        <button id="saveJob">Save Job</button>
        <button id="loadJobs">Refresh Job List</button>
      </div>
      
      <div class="section">
        <h3>Work Orders</h3>
        <div class="action-buttons">
          <input id="newWorkOrder" type="text" placeholder="Work Order #" />
          <button id="addWorkOrder">Add Work Order</button>
        </div>
        <div id="workOrdersList" class="list"></div>
      </div>

      <div class="section">
        <h3>Entries</h3>
        <div class="action-buttons">
          <button id="addEntry">Add Entry</button>
        </div>
        <div id="entriesList" class="list"></div>
      </div>
    </div>

    <div class="col panel">
      <h2>Jobs</h2>
      <label>Filter</label>
      <input id="filterJobs" type="text" placeholder="type job number or name..." />
      <label class="checkbox"><input id="viewArchived" type="checkbox" /> View Archived</label>
      <select id="jobsSelect" size="10" class="job-select"></select>
      <div class="action-buttons">
        <button id="loadSelected">Load Selected</button>
        <button id="deleteSelected">Delete Selected</button>
        <button id="exportPdfSelected">Export PDF (selected)</button>
      </div>
      <div class="section">
        <button id="exportJsonDownload">Download All Data (JSON)</button>
      </div>
      <div class="muted note">
        Note: CSV import is done server-side and stored in Postgres. PDF generation happens in your browser using jsPDF.
      </div>
    </div>
  </div>

<!-- modal for adding an entry -->
<div id="addEntryModal" class="modal-overlay">
  <div class="modal-body">
    <h3>Add Entry</h3>
    <label for="entryTagInput">Entry Tag/ID</label>
    <input id="entryTagInput" type="text" />
    <label for="entryHandingInput">Handing</label>
    <select id="entryHandingInput">
      <option value="LHR">LHR</option>
      <option value="RHR">RHR</option>
      <option value="LHRA">LHRA</option>
      <option value="RHRA">RHRA</option>
    </select>
    <label for="entryWidthInput">Door Opening Width</label>
    <input id="entryWidthInput" type="text" value="3'0&quot;" />
    <label for="entryHeightInput">Door Opening Height</label>
    <input id="entryHeightInput" type="text" value="7'0&quot;" />
    <div class="modal-actions">
      <button id="addEntryModalSave">Save</button>
      <button id="addEntryModalCancel">Cancel</button>
    </div>
  </div>
</div>

<!-- modal for editing frame and door leafs -->
<div id="partsModal" class="modal-overlay">
  <div class="modal-body">
    <h3>Edit Parts</h3>
    <div id="partsContainer" class="action-buttons"></div>
    <div class="modal-actions">
      <button id="partsModalClose">Close</button>
    </div>
  </div>
</div>

<!-- small modal for custom KV entry -->
<div id="modal" class="modal-overlay">
  <div class="modal-body">
    <h3 id="modalTitle">Add Item</h3>
    <div id="kvContainer"></div>
    <button id="addKVbtn">Add field</button>
    <div class="modal-actions">
      <button id="modalSave">Save</button>
      <button id="modalCancel">Cancel</button>
    </div>
  </div>
</div>
  <script src="js/app.js"></script>
  <script src="js/pdf.js"></script>
</body>
</html>
